<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "projects",
        "name" : "Mapped School District Absences",
        "headline" : "Mapped School District Absences",
        "description" : "I came across this data set from the Florida Department of Education in March. In Florida school districts are organized by county and I saw this as an opportunity to improve my mapping skills.
This tutorial from Erin C. Anderson was instrumental in being able to complete this project. In fact a lot of the code chunks were stolen.
Data The Florida Department of Education provides data on their website regarding the number of students by school that have missed more than 21 days of school.",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "0001",
        "datePublished": "0001-01-01 00:00:00 &#43;0000 UTC",
        "dateModified" : "0001-01-01 00:00:00 &#43;0000 UTC",
        "url" : "/projects/mapped/",
        "wordCount" : "641",
        "keywords" : [ "Blog" ]
    }
    </script>
        
            
                <title>Mapped School District Absences</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.42.2" />
        


        
        
            
                <meta name="description" content="R for the rest of us.">
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mapped School District Absences"/>
<meta name="twitter:description" content="I came across this data set from the Florida Department of Education in March. In Florida school districts are organized by county and I saw this as an opportunity to improve my mapping skills.
This tutorial from Erin C. Anderson was instrumental in being able to complete this project. In fact a lot of the code chunks were stolen.
Data The Florida Department of Education provides data on their website regarding the number of students by school that have missed more than 21 days of school."/>
<meta name="twitter:site" content="@kevin_gilds"/>

        <meta property="og:title" content="Mapped School District Absences" />
<meta property="og:description" content="I came across this data set from the Florida Department of Education in March. In Florida school districts are organized by county and I saw this as an opportunity to improve my mapping skills.
This tutorial from Erin C. Anderson was instrumental in being able to complete this project. In fact a lot of the code chunks were stolen.
Data The Florida Department of Education provides data on their website regarding the number of students by school that have missed more than 21 days of school." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/projects/mapped/" />
















        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Mapped School District Absences">
<meta itemprop="description" content="I came across this data set from the Florida Department of Education in March. In Florida school districts are organized by county and I saw this as an opportunity to improve my mapping skills.
This tutorial from Erin C. Anderson was instrumental in being able to complete this project. In fact a lot of the code chunks were stolen.
Data The Florida Department of Education provides data on their website regarding the number of students by school that have missed more than 21 days of school.">



<meta itemprop="wordCount" content="641">



<meta itemprop="keywords" content="" />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="../../css/main.css">
            <link rel="stylesheet" href="../../css/add-on.css">
            <link rel="stylesheet" href="../../css/academicons.min.css">
        

        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-111258922-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="../../"></a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="../../about/">
                            <i class="fa fa-id-card-o">&nbsp;</i>About
                    </a>
                </li>
            
                <li>
                    <a href="../../blog/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="../../projects/">
                            <i class="fa fa-list">&nbsp;</i>Projects
                    </a>
                </li>
            
                <li>
                    <a href="../../resume/">
                            <i class="">&nbsp;</i>Resume
                    </a>
                </li>
            
                <li>
                    <a href="../../notes">
                            <i class="fa fa-briefcase">&nbsp;</i>Worknotes
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="../../about/">
                            <h3>
                                <i class="fa fa-id-card-o">&nbsp;</i>About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="../../blog/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="../../projects/">
                            <h3>
                                <i class="fa fa-list">&nbsp;</i>Projects
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="../../resume/">
                            <h3>
                                <i class="">&nbsp;</i>Resume
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="../../notes">
                            <h3>
                                <i class="fa fa-briefcase">&nbsp;</i>Worknotes
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="../../sequence-charts/">Sequence Charts</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-08-19'>
                                    August 19, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="../../2018/08/19/sequence-charts/">Sequence Charts</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-08-19'>
                                    August 19, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="../../blog/a-slump/">A slump</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-08-15'>
                                    August 15, 2018</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="../../post/">Posts</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-08-19'>
                                    August 19, 2018</time>
                            </header>
                            

                        </article>
                

                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=%2fprojects%2fmapped%2f&amp;text=Mapped%20School%20District%20Absences&amp;via=kevin_gilds" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=%2fprojects%2fmapped%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fprojects%2fmapped%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=%2fprojects%2fmapped%2f&amp;title=Mapped%20School%20District%20Absences" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fprojects%2fmapped%2f&amp;title=Mapped%20School%20District%20Absences" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=%2fprojects%2fmapped%2f&amp;title=Mapped%20School%20District%20Absences" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=%2fprojects%2fmapped%2f&amp;description=Mapped%20School%20District%20Absences" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by &amp;body=%2fprojects%2fmapped%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="../../projects/mapped/">Mapped School District Absences</a></h1>
            
        
        
    </div>
    <div class="meta">

      <span class="author"></span>
      <span class="author"></span>
      
    </div>
</header>


  

  
  <div id="content">
    <p>I came across this data set from the Florida Department of Education in March. In Florida school districts are organized by county and I saw this as an opportunity to improve my mapping skills.</p>
<p>This <a href="http://eriqande.github.io/rep-res-web/lectures/making-maps-with-R.html">tutorial</a> from Erin C. Anderson was instrumental in being able to complete this project. In fact a lot of the code chunks were stolen.</p>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The <a href="http://www.fldoe.org/accountability/data-sys/edu-info-accountability-services/pk-12-public-school-data-pubs-reports/students.stml">Florida Department of Education</a> provides data on their website regarding the number of students by school that have missed more than 21 days of school. <a href="https://tidydatabykwg57.shinyapps.io/flabsences/">Go here for more information on this data</a></p>
<pre><code>## Response [http://www.fldoe.org/core/fileparse.php/7584/urlt/1516ABS21DAYSchool.xls]
##   Date: 2018-08-21 21:33
##   Status: 200
##   Content-Type: application/msexcel
##   Size: 751 kB
## &lt;ON DISK&gt;  /tmp/RtmpiSAizz/file7f41861c44d.xls</code></pre>
<pre><code>## Warning: NAs introduced by coercion

## Warning: NAs introduced by coercion</code></pre>
<p>I want to map the average percent of students who missed 21 or more days during the 2015-2016 school year. Below is a tibble of the output.</p>
<pre><code>## # A tibble: 74 x 2
##    district_name  mean
##    &lt;chr&gt;         &lt;dbl&gt;
##  1 ALACHUA       14.3 
##  2 BAKER         19.6 
##  3 BAY           15.3 
##  4 BRADFORD      17.7 
##  5 BREVARD        6.5 
##  6 BROWARD        9.82
##  7 CALHOUN       17.8 
##  8 CHARLOTTE      8.41
##  9 CITRUS        10.4 
## 10 CLAY           9.69
## # ... with 64 more rows</code></pre>
</div>
<div id="working-with-ggmap" class="section level2">
<h2>Working with ggmap</h2>
<p>The first step is extract data to build the map.</p>
<pre class="r"><code>#get state map
states &lt;- map_data(&quot;state&quot;)</code></pre>
<p>This code gets the parameters for Florida</p>
<pre class="r"><code>fl_df &lt;- subset(states, region == &quot;florida&quot;)</code></pre>
<p>The next step is to extract county parameters from Florida</p>
<pre class="r"><code>counties &lt;- map_data(&quot;county&quot;)
fl_county &lt;- subset(counties, region == &quot;florida&quot;)</code></pre>
<p>This chunk of code will display the state of Florida.</p>
<pre class="r"><code>fl_base &lt;- ggplot(data = fl_df, mapping = aes(x = long, y = lat, group = group)) + 
  coord_fixed(1.3) + 
  geom_polygon(color = &quot;black&quot;, fill = &quot;gray&quot;)
fl_base + theme_nothing()</code></pre>
<p><img src="../../projects/mapped_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>This code chunk overlays the county shapes onto the Florida Map.</p>
<pre class="r"><code>fl_base + theme_nothing() + 
  geom_polygon(data = fl_county, fill = NA, color = &quot;white&quot;) +
  geom_polygon(color = &quot;black&quot;, fill = NA)  # get the state border back on top</code></pre>
<p><img src="../../projects/mapped_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="more-data-munging" class="section level2">
<h2>More data munging</h2>
<p>In this chunk, I changed the name of the variable district_name to match the county data set. Case matters and the school district data set needed to be made lower in preparation of joining the data sets.</p>
<pre class="r"><code>absent_21_c &lt;- absent_21 %&gt;%
  rename(&quot;subregion&quot; = &quot;district_name&quot;)

absent_21_c$subregion &lt;- tolower(absent_21_c$subregion)</code></pre>
<p>Not all of the district_name and map data perfectly match. This is code will fix that. You will see that the anti-join function is an easy way to test.</p>
<pre class="r"><code>absent_21_c$subregion &lt;- gsub(&quot;dade&quot;, &quot;miami-dade&quot;, fixed = TRUE, absent_21_c$subregion)

absent_21_c$subregion &lt;- gsub(&quot;desoto&quot;, &quot;de soto&quot;, fixed = TRUE, absent_21_c$subregion)

absent_21_c$subregion &lt;- gsub(&quot;st. johns&quot;, &quot;st johns&quot;, fixed = TRUE, absent_21_c$subregion)

absent_21_c$subregion &lt;- gsub(&quot;st. lucie&quot;, &quot;st lucie&quot;, fixed = TRUE, absent_21_c$subregion)</code></pre>
</div>
<div id="ready-to-join" class="section level2">
<h2>Ready to Join</h2>
<p>This code chunk joins the two data sets.</p>
<pre class="r"><code>map_d &lt;- inner_join(fl_county, absent_21_c, by = &quot;subregion&quot;)</code></pre>
<p>This code chunk uses the anti-join function to ensure that all the counties and school district names match up.</p>
<pre class="r"><code>non_match &lt;- anti_join(fl_county, absent_21_c, by = &quot;subregion&quot;)

non_match</code></pre>
<pre><code>## [1] long      lat       group     order     region    subregion
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<p>This code chunk sets parameters for the map outline.</p>
<pre class="r"><code>ditch_the_axes &lt;- theme(
  axis.text = element_blank(),
  axis.line = element_blank(),
  axis.ticks = element_blank(),
  panel.border = element_blank(),
  panel.grid = element_blank(),
  axis.title = element_blank()
  )</code></pre>
<p>This code chunk plots the data from the school districts on to the map.</p>
<pre class="r"><code>map_fl_school_absences &lt;- fl_base + 
      geom_polygon(data = map_d, aes(fill = mean), color = &quot;white&quot;) +
      geom_polygon(color = &quot;black&quot;, fill = NA) +
      theme_bw() +
      ditch_the_axes

map_fl_school_absences</code></pre>
<p><img src="../../projects/mapped_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Similar to the example in the tutorial; the difference between school districts is not easily distinguishable on the map. This code chunk below is an example of how to add more color to the map.</p>
<pre class="r"><code>eb2 &lt;- map_fl_school_absences + 
    scale_fill_gradientn(colours = rev(rainbow(7)),
                         breaks = c(2, 4, 10, 100, 1000, 10000),
                         trans = &quot;log10&quot;)
eb2</code></pre>
<p><img src="../../projects/mapped_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>

  </div>

  <footer>
    <ul class="stats">
    

    
    
</ul>

  </footer>
</article>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='../../' class="logo"><img src="../../img/batman.jpg" alt="Hugo Future Imperfect" /></a>
      
    
    
      <header>
        <h2>Learning R for Social Good</h2>
        <p>Nonprofit Sector Data Science</p>
      </header>
    
    
      <ul class="icons">
        
        
  <li><a href="//github.com/kgilds" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/kevingilds" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/kevin_gilds" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




















      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="../../sequence-charts/">Sequence Charts</a>
              </h3>
              
              <time class="published" datetime='2018-08-19'>
                August 19, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="../../2018/08/19/sequence-charts/">Sequence Charts</a>
              </h3>
              
              <time class="published" datetime='2018-08-19'>
                August 19, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="../../blog/a-slump/">A slump</a>
              </h3>
              
              <time class="published" datetime='2018-08-15'>
                August 15, 2018
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="../../post/">Posts</a>
              </h3>
              
              <time class="published" datetime='2018-08-19'>
                August 19, 2018
              </time>
            </header>
            

          </article>
        
      </div>

      
    </div>
  </section>

  
  
  

  
  
    <section id="mini-bio">
      <h3>About</h3>
      <p>Documenting my efforts to learn R and life.</p>
      <a href="../../about/" class="button">Learn More</a>
    </section>
  

  
  <section id="footer">
    
      <ul class="icons">
        
        
  <li><a href="//github.com/kgilds" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/kevingilds" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/kevin_gilds" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




















      </ul>
    
    <p class="copyright">
      
        &copy; 2018
        
          R for the rest of us
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="../../js/util.js"></script>
      <script src="../../js/main.js"></script>
      <script src="../../js/backToTop.js"></script>
    

    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

